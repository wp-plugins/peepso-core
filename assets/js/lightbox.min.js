!function(a,b,c,d){var e=d(a,b,c),f=new e;c.lightbox=function(a,b){return"close"===a?void f.close():"function"!=typeof a?void f.open(a,b||{}):(f.options=b||{},f.init(),f.showLoading(),void a(function(a,b){f.hideLoading(),f.open(a,b||{})}))}}(jQuery||$,window._,peepso,function(a,b,c){function d(){}var e="ps-lightbox-data--opened",f="ps-lightbox-close--invert";return d.prototype={init:function(){this.$container||(this.$container=a(['<div class="ps-lightbox ps-js-lightbox" style="z-index:100000">','<div class="ps-lightbox-padding">','<div class="ps-lightbox-wrapper">','<div class="ps-lightbox-content">','<div class="ps-lightbox-object"></div>','<button class="ps-lightbox-arrow-prev" style="display:none"></button>','<button class="ps-lightbox-arrow-next" style="display:none"></button>','<div class="ps-lightbox-toolbar">','<div class="ps-lightbox-toolbar-actions">','<button class="ps-lightbox-data-toggle">Comments</button>',"</div>","</div>",'<div class="ps-lightbox-spinner"></div>',"</div>",'<div class="ps-lightbox-data"></div>','<div class="ps-lightbox-close">&times;</div>',"</div>","</div>","</div>"].join("")),this.$padding=this.$container.find(".ps-lightbox-padding"),this.$wrapper=this.$container.find(".ps-lightbox-wrapper"),this.$close=this.$container.find(".ps-lightbox-close"),this.$object=this.$container.find(".ps-lightbox-object"),this.$prev=this.$container.find(".ps-lightbox-arrow-prev"),this.$next=this.$container.find(".ps-lightbox-arrow-next"),this.$spinner=this.$container.find(".ps-lightbox-spinner"),this.$attachment=this.$container.find(".ps-lightbox-data"),this.$btnattachment=this.$container.find(".ps-lightbox-data-toggle"),this.attachevents(),this.$container.appendTo(document.body)),this.isMobile()&&(this.$viewport||(this.$viewport=a("meta[name=viewport]"),this.$viewport.length||(this.$viewport=a('<meta name="viewport" content="" />').appendTo("head"))),this.vpNoZoom="width=device-width, user-scalable=no",this.vpValue||(this.vpValue=this.$viewport.attr("content"),this.$viewport.attr("content",this.vpNoZoom))),this.options.simple?this.$container.addClass("ps-lightbox-simple"):this.$container.removeClass("ps-lightbox-simple"),this.$prev.hide(),this.$next.hide(),this.$container.show(),this.resetHeight(),this.options.simple&&this.setHeight();var b=a(window);b.off("resize.ps-lightbox"),this.options.simple&&b.on("resize.ps-lightbox",a.proxy(this.setHeight,this))},open:function(a,b){this.data=a||[],this.options=b||{},this.index=b.index||0,this.init(),this.togglenav(),this.go(this.index),this.hideAttachment()},close:function(b){this.$container&&(this.$container.hide(),this.$object.empty(),this.$attachment.empty(),this.isMobile()&&this.vpValue&&(this.$viewport.attr("content",this.vpValue),this.vpValue=!1),a(window).off("resize.ps-lightbox"))},go:function(a){"function"==typeof this.options.beforechange&&this.options.beforechange(this),this.data[a]&&(this.index=a,this.$object.html(this.data[this.index].content),this.$attachment.html(this.data[this.index].attachment||"")),"function"==typeof this.options.afterchange&&this.options.afterchange(this)},prev:function(){this.go(this.index<=0?this.data.length-1:this.index-1)},next:function(){this.go(this.index>=this.data.length-1?0:this.index+1)},togglenav:function(){var b=this.$prev.add(this.$next);return this.$container.off("click.ps-lightbox",".ps-lightbox-arrow-prev"),this.$container.off("click.ps-lightbox",".ps-lightbox-arrow-next"),a(window).off("keyup.ps-lightbox"),this.options.nonav||!this.data.length||this.data.length<=1?void b.hide():(b.show(),this.$container.on("click.ps-lightbox",".ps-lightbox-arrow-prev",a.proxy(this.prev,this)),this.$container.on("click.ps-lightbox",".ps-lightbox-arrow-next",a.proxy(this.next,this)),void a(window).on("keyup.ps-lightbox",a.proxy(function(a){var b=a.keyCode;37===b?this.prev():39===b&&this.next()},this)))},isAttachmentOpened:function(){return this.$attachment.hasClass(e)},showAttachment:function(){this.$attachment.addClass(e),this.$close.addClass(f)},hideAttachment:function(){this.$attachment.removeClass(e),this.$close.removeClass(f)},showLoading:function(){this.$object.hide(),this.$spinner.show()},hideLoading:function(){this.$spinner.hide(),this.$object.show()},attachevents:function(){this.$container.on("click.ps-lightbox",".ps-lightbox-padding",a.proxy(function(a){a.target===a.currentTarget&&(a.stopPropagation(),this.close())},this)),this.$btnattachment.on("click",a.proxy(function(){this.isAttachmentOpened()?this.hideAttachment():this.showAttachment()},this)),this.$close.on("click",a.proxy(function(){this.isAttachmentOpened()?this.hideAttachment():this.close()},this))},isMobile:function(){var a=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i,b=a.test(navigator.userAgent);return this.isMobile=b?function(){return!0}:function(){return!1},b},resetHeight:function(){this.$object.find("img").css("maxHeight","")},setHeight:b.debounce(function(){this.$object.find("img").css("maxHeight",this.$wrapper.height())},100)},d});