var list={_wpnonce:null,init:function(){psmessage.wrap_id="form-reporteditems",this._wpnonce=jQuery("#report-nonce").val();var a,b=500;jQuery(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(a){a.preventDefault();var b=this.search.substring(1),c={paged:list.__query(b,"paged")||"1",order:list.__query(b,"order")||"asc",orderby:list.__query(b,"orderby")||"rep_id"};list.update(c)}),jQuery("input[name=paged]").on("keyup",function(c){13===c.which&&c.preventDefault();var d={paged:parseInt(jQuery("input[name=paged]").val())||"1",order:jQuery("input[name=order]").val()||"asc",orderby:jQuery("input[name=orderby]").val()||"rep_id"};window.clearTimeout(a),a=window.setTimeout(function(){list.update(d)},b)})},update:function(a){$PeepSo.getJson("adminReport.sort",a,function(a){a.success&&(response=a.data,response.rows.length&&jQuery("#the-list").html(response.rows),response.column_headers.length&&jQuery("thead tr, tfoot tr").html(response.column_headers),response.pagination.bottom.length&&jQuery(".tablenav.top .tablenav-pages").html(jQuery(response.pagination.top).html()),response.pagination.top.length&&jQuery(".tablenav.bottom .tablenav-pages").html(jQuery(response.pagination.bottom).html()),list.init())})},unpublish:function(a){var b={rep_id:a,_wpnonce:this._wpnonce};$PeepSo.postJson("adminReport.unpublish",b,function(a){a.success?(a.notices&&psmessage.show("",a.notices[0]).fade_out(pswindow.fade_time),list.update({})):a.has_errors&&psmessage.show("",a.errors).fade_out(pswindow.fade_time)})},dismiss:function(a){var b={rep_id:a,_wpnonce:this._wpnonce};$PeepSo.postJson("adminReport.dismiss",b,function(a){a.success?(a.notices&&psmessage.show("",a.notices[0]).fade_out(pswindow.fade_time),list.update({})):a.has_errors&&psmessage.show("",a.errors).fade_out(pswindow.fade_time)})},ban:function(a){var b={rep_id:a,_wpnonce:this._wpnonce};$PeepSo.postJson("adminReport.ban",b,function(a){a.success?(a.notices&&psmessage.show("",a.notices[0]).fade_out(pswindow.fade_time),list.update({})):a.has_errors&&psmessage.show("",a.errors).fade_out(pswindow.fade_time)})},__query:function(a,b){for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]===b)return e[1]}return!1}};list.init();